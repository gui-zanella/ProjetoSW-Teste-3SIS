!function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e,t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(function(e){e.exports=function(){function e(t){if(!(this instanceof e))return new e(t);var n=this,r={searchSelector:"*AND",hideBy:"display:none",diacriticsMap:{}};if(n.options={},["columns","addImportant","searchSelector","hideBy","manualContentHandling","callSearchManually","searchInSpecificColumn","diacriticsMap","didSearch","invert"].forEach(function(e){n.options[e]=t[e]||r[e]}),this.options.searchSelector.length>1){var o=n.options.searchSelector.trim();n.options.searchSelector=o.substr(0,1),n.options.searchSelectorMode=o.substr(1).toUpperCase()}if(n.content_tag=document.querySelectorAll(t.contentTag),!n.content_tag)throw new Error("Error! Could not find contentTag element");if(n.content_param=t.contentTag,n.search_tag=document.querySelector(t.searchTag),!n.search_tag&&!n.options.callSearchManually)throw new Error('Error! Provide one of search methods: searchTag or callSearchManually and call .search("phrase") manually');var i=n.search_tag&&n.search_tag.value||"";n.search=function(e,t){var r=n.options.callSearchManually&&void 0!==e?e:n.search_tag?n.search_tag.value:"";i!=(i=r)&&(n._applyCSS(i,t),n.options.didSearch&&n.options.didSearch(i))},n._onSearch=function(e){if("keydown"==e.type)return setTimeout(n.search,0);n.search()},n.destroy=function(){n.options.callSearchManually||n._processEventListeners("remove"),n._destroy()},n.options.callSearchManually||n._processEventListeners("add"),n._addStyleTag(),n._setJets(),n._applyCSS(i)}return e.prototype={constructor:e,_processEventListeners:function(e){["input","keydown","change"].forEach(function(t){this.search_tag[e+"EventListener"](t,this._onSearch)}.bind(this))},_applyCSS:function(e,t){for(var n=this.options,r=this.replaceDiacritics(e.trim().toLowerCase().replace(/\s\s+/g," ")).replace(/\\/g,"\\\\"),o=n.searchSelectorMode?r.split(" ").filter(function(e,t,n){return n.indexOf(e)==t}):[r],i="AND"==n.searchSelectorMode,a=new Array(o.length),s=0,c=o.length;s<c;s++)a[s]=(i?this.content_param+">":"")+(n.invert?"":":not(")+"[data-jets"+(void 0!==t?"-col-"+t:"")+n.searchSelector+'="'+o[s]+'"]'+(n.invert?"":")");var l=n.hideBy.split(";").filter(Boolean).map(function(e){return e+(n.addImportant?"!important":"")}),u=(i?"":this.content_param+">")+a.join(i?",":"")+"{"+l.join(";")+"}";this.styleTag.innerHTML=r.length?u:""},_addStyleTag:function(){this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)},_getText:function(e){return e&&(e.textContent||e.innerText)||""},_sanitize:function(e){return this.replaceDiacritics(e).trim().replace(/\s+/g," ").toLowerCase()},_getContentTags:function(e){return Array.prototype.slice.call(this.content_tag).reduce(function(t,n){return t.concat(Array.prototype.slice.call(n.querySelectorAll(e||":scope > *")))},[])},_handleSpecificColumns:function(e,t){var n=this;n.options.searchInSpecificColumn&&Array.prototype.slice.call(e.children).map(function(r,o){n.options.columns&&n.options.columns.length&&-1==n.options.columns.indexOf(o)||e[(t||"remove")+"Attribute"]("data-jets-col-"+o,t&&n._sanitize(n._getText(r)))})},_setJets:function(e,t){for(var n,r,o=this,i=o._getContentTags(t?"":e),a=0;r=i[a];a++)r.hasAttribute("data-jets")&&!t||(n=this.options.manualContentHandling?this.options.manualContentHandling(r):o.options.columns&&o.options.columns.length?o.options.columns.map(function(e){return o._getText(r.children[e])}).join(" "):o._getText(r),r.setAttribute("data-jets",o._sanitize(n)),o._handleSpecificColumns(r,"set"))},replaceDiacritics:function(e){var t=this.options.diacriticsMap;for(var n in t)if(t.hasOwnProperty(n))for(var r=0,o=t[n].length;r<o;r++)e=e.replace(new RegExp(t[n][r],"g"),n);return e},update:function(e){this._setJets(":scope > :not([data-jets])",e)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);for(var e,t=this._getContentTags(),n=0;e=t[n];n++)e.removeAttribute("data-jets"),this._handleSpecificColumns(e)}},function(e,t){try{e.querySelector(":scope body")}catch(n){["querySelector","querySelectorAll"].forEach(function(n){var r=t[n];t[n]=function(t){if(/(^|,)\s*:scope/.test(t)){var o=this.getAttribute("id");this.id="ID_"+Date.now(),t=t.replace(/((^|,)\s*):scope/g,"$1#"+this.getAttribute("id"));var i=e[n](t);return this.id=o,i}return r.call(this,t)}})}}(window.document,Element.prototype),e}()}(e={exports:{}},e.exports),e.exports),i={selectionMin:2,selectionMax:2,resultsVisibleClassname:"readers-comparator--container-visible",contentTag:"readers-comparator__items-container",triggerSelector:"#readers-comparator-trigger",inputsSelector:'input[id^="readers-comparator-option-"]'},a=function(){function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,e),!Element.prototype.isPrototypeOf(n))throw new TypeError("ReadersComparator: The target element must be a HTML Element.");this.target=n,this.options=r({},i,a),this.trigger=n.querySelector(this.options.triggerSelector),this.inputs=Array.prototype.slice.call(n.querySelectorAll(this.options.inputsSelector)),this.labels=n.querySelectorAll("label"),this.jets=new o({contentTag:"."+this.options.contentTag,searchSelector:"*OR",manualContentHandling:e.jetsPropertySelector,callSearchManually:!0}),this.selected=this.getSelectedInputs().length,this.bindEvents(),this.updateTriggerState(),this.resultsVisible=!1}return n(e,[{key:"isSelectionInRange",value:function(){var e=this.selected,t=this.options,n=t.selectionMin,r=t.selectionMax;return e>=n&&e<=r}},{key:"getSelectedInputs",value:function(){return this.inputs.filter(function(e){return e.checked})}},{key:"updateTriggerState",value:function(){this.trigger.disabled=!this.isSelectionInRange()}},{key:"displayResults",value:function(){this.resultsVisible||(this.resultsVisible=!0,this.target.classList.add(this.options.resultsVisibleClassname))}},{key:"search",value:function(){var e=this.inputs.filter(function(e){return e.checked});this.jets.search(e.map(function(e){return e.id}).reduce(function(e,t){return e+" "+t},"")),this.displayResults()}},{key:"bindEvents",value:function(){var e=this;Array.prototype.forEach.call(this.labels,function(t){var n=t.getAttribute("for");t.addEventListener("click",function(t){var r=e.inputs.filter(function(e){return e.id===n})[0];e.selected>=e.options.selectionMax&&r&&!r.checked&&t.preventDefault()})}),this.target.addEventListener("change",function(){e.selected=e.getSelectedInputs().length,e.updateTriggerState()}),this.trigger.addEventListener("click",function(){return e.search()})}}],[{key:"jetsPropertySelector",value:function(e){return e.dataset.id}}]),e}();document.addEventListener("DOMContentLoaded",function(){return new a(document.querySelector(".readers-comparator"))})}();
